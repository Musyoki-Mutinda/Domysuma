<section class="plan-details-sec">

  <!-- HEADER -->
  <section class="section-header">
    <h2>{{ project?.title }}</h2>
    <p>Project #{{ project?.id }}</p>
  </section>

  <!-- TOP SECTION -->
  <section class="top-sec">
    <div>
      <!-- MAIN GALLERY -->
      <div class="slideshow">
        <button class="btn-custom btn-custom-primary-outline" (click)="onHeartClick()">
          <i class="fa-regular fa-heart"></i>
        </button>
        <app-gallery [galleryId]="galleryId"></app-gallery>
      </div>

      <!-- Single share button -->
    <button class="share-btn" (click)="toggleSharePopup()">
      <i class="fa-solid fa-share-nodes"></i>
    </button>

    <!-- Popup -->
    <div class="share-popup-overlay" *ngIf="showSharePopup" (click)="toggleSharePopup()"></div>

    <div class="share-popup" *ngIf="showSharePopup">
      <h3>Share this project</h3>

      <div class="share-options">
        <button (click)="shareTo('whatsapp')"><i class="fa-brands fa-whatsapp"></i></button>
        <button (click)="shareTo('facebook')"><i class="fa-brands fa-facebook"></i></button>
        <button (click)="shareTo('twitter')"><i class="fa-brands fa-x-twitter"></i></button>
        <button (click)="shareTo('linkedin')"><i class="fa-brands fa-linkedin"></i></button>
        <button (click)="copyLink()"><i class="fa-solid fa-copy"></i></button>
      </div>

      <button class="close-btn" (click)="toggleSharePopup()">Close</button>
    </div>

      <!-- PLAN INFO -->
      <div class="key-specs">
        <h4>Project Information</h4>
        <div class="key-spec-item">
          <h5>Location:</h5>
          <p>{{ project?.location }}</p>
        </div>
        <div class="key-spec-item">
          <h5>Category:</h5>
          <p>{{ project?.category }}</p>
        </div>
        <div class="key-spec-item">
          <h5>Completion Year:</h5>
          <p>{{ project?.year }}</p>
        </div>
        <div class="key-spec-item">
          <h5>Client Type: </h5>
          <p>{{ project?.clientType }}</p>
        </div>
      </div>
    </div>

    <!-- RIGHT COLUMN -->
    <div>
      <div class="dsn-detail">
        <h4>Project Description</h4>
        <p>{{ project?.description }}</p>
        <div>
          <h5>Scope of Work</h5>
          <ul>
            <li *ngFor="let item of project?.scope">{{ item }}</li>
          </ul>
        </div>
        <!--<button class="btn-custom btn-custom-primary">Contact Us</button>-->
      </div> 
    </div>
  </section>

  <!-- MID SECTION -->
  <section class="mid-sec">
    <div>
      <div class="floor-plans">
        <h4>Floor Plans</h4>
        <div>
          <app-gallery [galleryId]="plansGalleryId"></app-gallery>
        </div>
      </div>
    </div>
    <div>
      <!-- <div class="estimates">
        <h5>Construction cost estimates</h5>
        <button class="btn-custom btn-custom-primary-outline">Calculate</button>
      </div> -->
    </div>
  </section>

  <!-- SIMILAR PLANS -->
  <section class="bottom-sec">
    <h4>Similar Projects </h4> <!--<span routerLink="/plans">View More</span> -->
    <div class="similar-plans">
      <app-project-item-card *ngFor="let p of similarPlans" [projectData]="p"></app-project-item-card>
    </div>
  </section>

  <!-- ================= LOGIN MODAL ================= -->
  <!-- Add this at the bottom of the template -->
  <app-login-modal></app-login-modal>

</section>
