<section class="header-section">
  <div class="header-top-sec">

    <div class="header-socials">
      <p><i class="fa-regular fa-envelope"></i> info&#64;domysumaarchitects.com</p>
    </div>

    <div class="header-actions">
      <!-- Show login button if user is not logged in -->
      <ng-container *ngIf="!userName; else loggedInTemplate">
        <p>
          <i class="fa-regular fa-user"></i>
          <button class="login-btn" (click)="openLogin()">Login</button>
        </p>
      </ng-container>

      <!-- Template for logged-in user -->
      <ng-template #loggedInTemplate>
        <li class="user-dropdown">
          <button class="user-btn" (click)="toggleDropdown()">
            <i class="fa-regular fa-user"></i> {{ userName }}
            <i class="fa-solid fa-chevron-down"></i>
          </button>
          <ul class="dropdown-menu" [class.show]="dropdownOpen">
            <li (click)="logout()">Logout</li>
          </ul>
        </li>
      </ng-template>

      <li class="saved-btn" (click)="openSavedPlans()">
        <i class="fa-regular fa-heart"></i> Saved
      </li>

      <li class="dropdown">
        <button class="settings-btn" (click)="toggleDropdown()">
          <i class="fa-solid fa-gear"></i> Settings
          <i class="fa-solid fa-chevron-down"></i>
        </button>

        <ul class="dropdown-menu" [class.show]="dropdownOpen">
          <li (click)="openPreferences()">Preferences</li>
          <li class="dark-mode-toggle">
            <span>Dark Mode</span>
            <label class="switch">
              <input type="checkbox" (change)="toggleDarkMode($event)" [checked]="isDarkMode">
              <span class="slider round"></span>
            </label>
          </li>
          <li (click)="goToHelpCenter()">Help Center</li>
        </ul>
      </li>
    </div>

  </div>

  <div class="header-bottom-sec">
    <a routerLink="/home">
      <img src="./assets/icons/domysuma-logo.svg" alt="Domysuma Logo">
    </a>

    <ul class="header-menu-items">
      <li routerLink="/home">Home</li>
      <li routerLink="/projects">Projects</li>
      <li routerLink="/services">Services</li>
      <li routerLink="/about">About</li>
      <li routerLink="/blog">Blog</li>

      <button class="btn-custom btn-custom-primary header-call-to-action"
              (click)="showContactForm = true">
        Talk To an Architect Free!
      </button>

      <app-contact-form-popup
        *ngIf="showContactForm"
        (close)="showContactForm = false">
      </app-contact-form-popup>
    </ul>
  </div>

  <div class="header-chats header-wa" (click)="openWhatsApp()">
    <i class="fa-brands fa-whatsapp"></i>
  </div>

  <div class="header-chats header-msg">
    <i class="fa-solid fa-comment-dots"></i>
  </div>

  <app-login-modal></app-login-modal>
</section>
